(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();document.addEventListener("DOMContentLoaded",()=>{w(),L(),S(),T(),I(),C(),q(),M(),z()});function w(){const e=document.documentElement,t=()=>{const n=window.visualViewport,s=(n==null?void 0:n.height)||window.innerHeight;e.style.setProperty("--app-height",`${s}px`)};t(),window.addEventListener("resize",t),window.addEventListener("orientationchange",t),window.visualViewport&&window.visualViewport.addEventListener("resize",t)}function L(){const e=document.querySelector(".navbar"),t=document.querySelector(".navbar-progress");window.addEventListener("scroll",()=>{const s=window.pageYOffset,r=document.documentElement.scrollHeight-window.innerHeight,o=s/r*100;t&&(t.style.width=`${o}%`),e&&e.classList.toggle("scrolled",s>100)}),document.querySelectorAll(".nav-link").forEach(s=>{s.addEventListener("click",r=>{const o=s.getAttribute("href");if(o!=null&&o.startsWith("#")){r.preventDefault();const c=document.querySelector(o);c&&c.scrollIntoView({behavior:"smooth"}),h()}})}),A()}function A(){const e=document.getElementById("nav-toggle"),t=document.getElementById("nav-menu");if(!e||!t)return;const n=document.createElement("div");n.className="nav-overlay",n.id="nav-overlay",document.body.appendChild(n),e.addEventListener("click",()=>{e.getAttribute("aria-expanded")==="true"?h():x()}),n.addEventListener("click",h),document.addEventListener("keydown",s=>{s.key==="Escape"&&h()}),window.addEventListener("resize",()=>{window.innerWidth>768&&h()})}function x(){const e=document.getElementById("nav-toggle"),t=document.getElementById("nav-menu"),n=document.getElementById("nav-overlay");e&&(e.setAttribute("aria-expanded","true"),e.setAttribute("aria-label","Menü schließen")),t&&t.classList.add("active"),n&&n.classList.add("active"),document.body.style.overflow="hidden"}function h(){const e=document.getElementById("nav-toggle"),t=document.getElementById("nav-menu"),n=document.getElementById("nav-overlay");e&&(e.setAttribute("aria-expanded","false"),e.setAttribute("aria-label","Menü öffnen")),t&&t.classList.remove("active"),n&&n.classList.remove("active"),document.body.style.overflow=""}function S(){const e={threshold:[0,.1],rootMargin:"0px 0px -100px 0px"},t=new IntersectionObserver(s=>{s.forEach(r=>{const o=r.target,c=o.getAttribute("data-scroll");r.isIntersecting?(o.classList.add("visible"),o.classList.remove("scroll-init"),c&&o.classList.add(`scroll-${c}`),o.hasAttribute("data-scroll-once")&&t.unobserve(o)):o.hasAttribute("data-scroll-once")||(o.classList.remove("visible"),o.classList.add("scroll-init"),c&&o.classList.remove(`scroll-${c}`),c!=null&&c.includes("parallax")&&(o.style.transform=""))})},e);document.querySelectorAll("[data-scroll]").forEach(s=>{t.observe(s),s.classList.add("scroll-init")}),k()}function k(){var r;if((r=window.matchMedia)==null?void 0:r.call(window,"(prefers-reduced-motion: reduce)").matches)return;let t=!1;function n(o,c){return c/window.innerHeight*({"parallax-slow":-30,"parallax-medium":-50,"parallax-fast":-90}[o]||-40)}function s(){document.querySelectorAll('[data-scroll*="parallax"]').forEach(c=>{const a=c.getBoundingClientRect();if(a.bottom<-200||a.top>window.innerHeight+200)return;const l=a.top+a.height/2,u=window.innerHeight/2,i=l-u,d=c.getAttribute("data-scroll"),m=n(d,i);c.style.transform=`translate3d(0, ${m}px, 0)`}),t=!1}window.addEventListener("scroll",()=>{t||(requestAnimationFrame(s),t=!0)},{passive:!0}),window.addEventListener("resize",s,{passive:!0})}function T(){const e=document.querySelector('a[href="#impressum"]'),t=document.querySelector('a[href="#datenschutz"]'),n=document.getElementById("impressum-overlay"),s=document.getElementById("datenschutz-overlay");let r=null;function o(i){if(!i)return[];const d=["a[href]","button:not([disabled])","input:not([disabled])","textarea:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(", ");return Array.from(i.querySelectorAll(d)).filter(m=>m.offsetParent!==null)}function c(i,d){if(!i)return;r=d||null,i.classList.add("active"),i.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden";const m=o(i);m.length?m[0].focus():(i.setAttribute("tabindex","-1"),i.focus()),i.addEventListener("keydown",u),document.addEventListener("keydown",l)}function a(i){i&&(i.classList.remove("active"),i.setAttribute("aria-hidden","true"),document.body.style.overflow="",i.removeEventListener("keydown",u),document.removeEventListener("keydown",l),r!=null&&r.focus&&r.focus(),r=null)}function l(i){if(i.key==="Escape"){const d=document.querySelector(".legal-overlay.active");d&&a(d)}}function u(i){if(i.key!=="Tab")return;const d=i.currentTarget,m=o(d);if(!m.length){i.preventDefault();return}const f=m[0],g=m[m.length-1];i.shiftKey&&document.activeElement===f?(i.preventDefault(),g.focus()):!i.shiftKey&&document.activeElement===g&&(i.preventDefault(),f.focus())}e==null||e.addEventListener("click",i=>{i.preventDefault(),c(n,e)}),t==null||t.addEventListener("click",i=>{i.preventDefault(),c(s,t)}),document.querySelectorAll(".close-legal").forEach(i=>{i.addEventListener("click",()=>{const d=i.closest(".legal-overlay");d&&a(d)})}),[n,s].forEach(i=>{i&&(i.addEventListener("click",d=>{d.target===i&&a(i)}),i.setAttribute("aria-hidden","true"))})}function q(){var a;const e=document.getElementById("theme-toggle"),t=document.documentElement;let n=document.getElementById("theme-status-sr");n||(n=document.createElement("div"),n.id="theme-status-sr",n.setAttribute("aria-live","polite"),n.className="sr-only",document.body.appendChild(n));function s(l){const u=l==="dark";t.setAttribute("data-theme",l),e&&e.setAttribute("aria-checked",String(u));const i=document.getElementById("theme-desc");i&&(i.textContent="Hell / Dunkel"),n.textContent=u?"Dunkelmodus aktiviert":"Hellmodus aktiviert"}const r=localStorage.getItem("noart-theme"),o=(a=window.matchMedia)==null?void 0:a.call(window,"(prefers-color-scheme: dark)").matches;s(r||(o?"dark":"light")),e&&(e.addEventListener("click",()=>{const u=t.getAttribute("data-theme")==="dark"?"light":"dark";s(u),localStorage.setItem("noart-theme",u)}),e.addEventListener("keydown",l=>{(l.key===" "||l.key==="Enter")&&(l.preventDefault(),e.click())}))}function M(){const e=document.querySelector(".theme-toggle-float");if(!e||!("ontouchstart"in window||navigator.maxTouchPoints>0))return;let n=null;const s=()=>{clearTimeout(n),n=setTimeout(()=>e.classList.remove("expanded"),1e3)},r=()=>{e.classList.add("expanded"),s()};e.addEventListener("touchstart",o=>{r()},{passive:!0}),e.addEventListener("click",()=>{r()}),e.addEventListener("blur",()=>{e.classList.remove("expanded"),clearTimeout(n)},!0),document.addEventListener("touchstart",o=>{e.contains(o.target)||(e.classList.remove("expanded"),clearTimeout(n))},{passive:!0})}function I(){const e=document.getElementById("contact-form");if(!e)return;let t=document.getElementById("contact-status");t||(t=document.createElement("div"),t.id="contact-status",t.setAttribute("tabindex","-1"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.className="contact-status",e.prepend(t)),e.addEventListener("submit",async s=>{var i,d,m,f,g,p;s.preventDefault();const r=new FormData(e),o={name:((i=r.get("name"))==null?void 0:i.trim())||"",email:((d=r.get("email"))==null?void 0:d.trim())||"",subject:((m=r.get("subject"))==null?void 0:m.trim())||"",message:((f=r.get("message"))==null?void 0:f.trim())||""};if(!o.name||!o.email||!o.message){n("Bitte füllen Sie alle Felder aus.",!0),(g=e.querySelector('[name="name"]'))==null||g.focus();return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)){n("Bitte geben Sie eine gültige E-Mail-Adresse ein.",!0),(p=e.querySelector('[name="email"]'))==null||p.focus();return}const a=e.querySelector('button[type="submit"]'),l=(a==null?void 0:a.querySelector("span"))||(a==null?void 0:a.firstChild),u=l==null?void 0:l.textContent;a&&(l&&(l.textContent="Wird gesendet..."),a.setAttribute("aria-busy","true"),a.disabled=!0),t.textContent="",t.classList.remove("status-error");try{const v=new AbortController,b=setTimeout(()=>v.abort(),5e3),E=await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o),signal:v.signal});clearTimeout(b);const y=await E.json();y.ok?(n("Vielen Dank für Ihre Nachricht! Wir werden uns bald bei Ihnen melden.",!1),e.reset()):n(y.error||"Beim Senden ist ein Fehler aufgetreten.",!0)}catch(v){console.warn("Contact form submission failed:",v),n("Netzwerkfehler: Nachricht konnte nicht gesendet werden.",!0)}finally{a&&(l&&u&&(l.textContent=u),a.removeAttribute("aria-busy"),a.disabled=!1)}});function n(s,r){t.textContent=s,t.classList.toggle("status-error",r),t.focus()}}function C(){const e=document.querySelectorAll(".hero-line"),t=document.querySelector(".hero-subtitle"),n=document.querySelector(".hero-cta");if(e.forEach((s,r)=>{const o=s.getAttribute("data-delay")||r*200;setTimeout(()=>{s.style.opacity="1",s.style.transform="translateY(0)"},o)}),t){const s=t.getAttribute("data-delay")||600;setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(0)"},s)}if(n){const s=n.getAttribute("data-delay")||800;setTimeout(()=>{n.style.opacity="1",n.style.transform="translateY(0)"},s)}O()}function O(){var r;const e=document.querySelector(".hero-video");if(!e)return;if((r=window.matchMedia)==null?void 0:r.call(window,"(prefers-reduced-motion: reduce)").matches){e.pause();return}e.playbackRate=.5,e.play().catch(()=>{});let n=!0;document.addEventListener("visibilitychange",()=>{n=!document.hidden});const s=()=>{if(e.readyState<2){e.addEventListener("loadeddata",s,{once:!0});return}const o=e.duration||5,c=Math.min(6,o),a=Math.max(0,(o-c)/2),l=Math.min(o,a+c),u=.02;let i=1;function d(){if(!n){requestAnimationFrame(d);return}if(i===1&&!e.paused&&e.currentTime<l-.05){requestAnimationFrame(d);return}i===1&&e.currentTime>=l-.03?(i=-1,e.pause()):i===-1&&e.currentTime<=a+.03&&(i=1,e.play().catch(()=>{})),i===-1&&(e.currentTime=Math.max(a,e.currentTime-u)),requestAnimationFrame(d)}requestAnimationFrame(d)};s()}function z(){document.querySelectorAll(".hero-layer, .cursor, .content-section").forEach(n=>{n.style.willChange="transform"}),document.addEventListener("visibilitychange",()=>{document.body.style.animationPlayState=document.hidden?"paused":"running"});const t=document.querySelector(".theme-toggle-float");t&&(t.addEventListener("focusout",()=>t.blur()),document.addEventListener("mousedown",n=>{t.contains(n.target)||t.blur()}))}
