(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function s(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerPolicy&&(t.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?t.credentials="include":o.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(o){if(o.ep)return;o.ep=!0;const t=s(o);fetch(o.href,t)}})();document.addEventListener("DOMContentLoaded",()=>{E(),w(),A(),k(),q(),S(),x(),C()});function E(){const e=document.querySelector(".navbar"),r=document.querySelector(".navbar-progress");window.addEventListener("scroll",()=>{const i=window.pageYOffset,o=document.documentElement.scrollHeight-window.innerHeight,t=i/o*100;r&&(r.style.width=`${t}%`),e&&e.classList.toggle("scrolled",i>100)}),document.querySelectorAll(".nav-link").forEach(i=>{i.addEventListener("click",o=>{const t=i.getAttribute("href");if(t!=null&&t.startsWith("#")){o.preventDefault();const c=document.querySelector(t);c&&c.scrollIntoView({behavior:"smooth"})}})})}function w(){const e={threshold:[0,.1],rootMargin:"0px 0px -100px 0px"},r=new IntersectionObserver(i=>{i.forEach(o=>{const t=o.target,c=t.getAttribute("data-scroll");o.isIntersecting?(t.classList.add("visible"),t.classList.remove("scroll-init"),c&&t.classList.add(`scroll-${c}`),t.hasAttribute("data-scroll-once")&&r.unobserve(t)):t.hasAttribute("data-scroll-once")||(t.classList.remove("visible"),t.classList.add("scroll-init"),c&&t.classList.remove(`scroll-${c}`),c!=null&&c.includes("parallax")&&(t.style.transform=""))})},e);document.querySelectorAll("[data-scroll]").forEach(i=>{r.observe(i),i.classList.add("scroll-init")}),L()}function L(){var o;if((o=window.matchMedia)==null?void 0:o.call(window,"(prefers-reduced-motion: reduce)").matches)return;let r=!1;function s(t,c){return c/window.innerHeight*({"parallax-slow":-30,"parallax-medium":-50,"parallax-fast":-90}[t]||-40)}function i(){document.querySelectorAll('[data-scroll*="parallax"]').forEach(c=>{const a=c.getBoundingClientRect();if(a.bottom<-200||a.top>window.innerHeight+200)return;const l=a.top+a.height/2,d=window.innerHeight/2,n=l-d,u=c.getAttribute("data-scroll"),m=s(u,n);c.style.transform=`translate3d(0, ${m}px, 0)`}),r=!1}window.addEventListener("scroll",()=>{r||(requestAnimationFrame(i),r=!0)},{passive:!0}),window.addEventListener("resize",i,{passive:!0})}function A(){const e=document.querySelector('a[href="#impressum"]'),r=document.querySelector('a[href="#datenschutz"]'),s=document.getElementById("impressum-overlay"),i=document.getElementById("datenschutz-overlay");let o=null;function t(n){if(!n)return[];const u=["a[href]","button:not([disabled])","input:not([disabled])","textarea:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(", ");return Array.from(n.querySelectorAll(u)).filter(m=>m.offsetParent!==null)}function c(n,u){if(!n)return;o=u||null,n.classList.add("active"),n.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden";const m=t(n);m.length?m[0].focus():(n.setAttribute("tabindex","-1"),n.focus()),n.addEventListener("keydown",d),document.addEventListener("keydown",l)}function a(n){n&&(n.classList.remove("active"),n.setAttribute("aria-hidden","true"),document.body.style.overflow="",n.removeEventListener("keydown",d),document.removeEventListener("keydown",l),o!=null&&o.focus&&o.focus(),o=null)}function l(n){if(n.key==="Escape"){const u=document.querySelector(".legal-overlay.active");u&&a(u)}}function d(n){if(n.key!=="Tab")return;const u=n.currentTarget,m=t(u);if(!m.length){n.preventDefault();return}const f=m[0],h=m[m.length-1];n.shiftKey&&document.activeElement===f?(n.preventDefault(),h.focus()):!n.shiftKey&&document.activeElement===h&&(n.preventDefault(),f.focus())}e==null||e.addEventListener("click",n=>{n.preventDefault(),c(s,e)}),r==null||r.addEventListener("click",n=>{n.preventDefault(),c(i,r)}),document.querySelectorAll(".close-legal").forEach(n=>{n.addEventListener("click",()=>{const u=n.closest(".legal-overlay");u&&a(u)})}),[s,i].forEach(n=>{n&&(n.addEventListener("click",u=>{u.target===n&&a(n)}),n.setAttribute("aria-hidden","true"))})}function S(){var a;const e=document.getElementById("theme-toggle"),r=document.documentElement;let s=document.getElementById("theme-status-sr");s||(s=document.createElement("div"),s.id="theme-status-sr",s.setAttribute("aria-live","polite"),s.className="sr-only",document.body.appendChild(s));function i(l){const d=l==="dark";r.setAttribute("data-theme",l),e&&e.setAttribute("aria-checked",String(d));const n=document.getElementById("theme-desc");n&&(n.textContent="Hell / Dunkel"),s.textContent=d?"Dunkelmodus aktiviert":"Hellmodus aktiviert"}const o=localStorage.getItem("noart-theme"),t=(a=window.matchMedia)==null?void 0:a.call(window,"(prefers-color-scheme: dark)").matches;i(o||(t?"dark":"light")),e&&(e.addEventListener("click",()=>{const d=r.getAttribute("data-theme")==="dark"?"light":"dark";i(d),localStorage.setItem("noart-theme",d)}),e.addEventListener("keydown",l=>{(l.key===" "||l.key==="Enter")&&(l.preventDefault(),e.click())}))}function x(){const e=document.querySelector(".theme-toggle-float");if(!e||!("ontouchstart"in window||navigator.maxTouchPoints>0))return;let s=null;const i=o=>{var t;((t=o.target)==null?void 0:t.id)!=="theme-toggle"&&(e.classList.add("expanded"),clearTimeout(s),s=setTimeout(()=>e.classList.remove("expanded"),2e3))};e.addEventListener("click",i),e.addEventListener("touchstart",i),e.addEventListener("blur",()=>{e.classList.remove("expanded"),clearTimeout(s)},!0)}function k(){const e=document.getElementById("contact-form");if(!e)return;let r=document.getElementById("contact-status");r||(r=document.createElement("div"),r.id="contact-status",r.setAttribute("tabindex","-1"),r.setAttribute("role","status"),r.setAttribute("aria-live","polite"),r.setAttribute("aria-atomic","true"),r.className="contact-status",e.prepend(r)),e.addEventListener("submit",async i=>{var n,u,m,f,h,p;i.preventDefault();const o=new FormData(e),t={name:((n=o.get("name"))==null?void 0:n.trim())||"",email:((u=o.get("email"))==null?void 0:u.trim())||"",subject:((m=o.get("subject"))==null?void 0:m.trim())||"",message:((f=o.get("message"))==null?void 0:f.trim())||""};if(!t.name||!t.email||!t.message){s("Bitte füllen Sie alle Felder aus.",!0),(h=e.querySelector('[name="name"]'))==null||h.focus();return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)){s("Bitte geben Sie eine gültige E-Mail-Adresse ein.",!0),(p=e.querySelector('[name="email"]'))==null||p.focus();return}const a=e.querySelector('button[type="submit"]'),l=(a==null?void 0:a.querySelector("span"))||(a==null?void 0:a.firstChild),d=l==null?void 0:l.textContent;a&&(l&&(l.textContent="Wird gesendet..."),a.setAttribute("aria-busy","true"),a.disabled=!0),r.textContent="",r.classList.remove("status-error");try{const g=new AbortController,b=setTimeout(()=>g.abort(),5e3),v=await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),signal:g.signal});clearTimeout(b);const y=await v.json();y.ok?(s("Vielen Dank für Ihre Nachricht! Wir werden uns bald bei Ihnen melden.",!1),e.reset()):s(y.error||"Beim Senden ist ein Fehler aufgetreten.",!0)}catch(g){console.warn("Contact form submission failed:",g),s("Netzwerkfehler: Nachricht konnte nicht gesendet werden.",!0)}finally{a&&(l&&d&&(l.textContent=d),a.removeAttribute("aria-busy"),a.disabled=!1)}});function s(i,o){r.textContent=i,r.classList.toggle("status-error",o),r.focus()}}function q(){const e=document.querySelectorAll(".hero-line"),r=document.querySelector(".hero-subtitle"),s=document.querySelector(".hero-cta");if(e.forEach((i,o)=>{const t=i.getAttribute("data-delay")||o*200;setTimeout(()=>{i.style.opacity="1",i.style.transform="translateY(0)"},t)}),r){const i=r.getAttribute("data-delay")||600;setTimeout(()=>{r.style.opacity="1",r.style.transform="translateY(0)"},i)}if(s){const i=s.getAttribute("data-delay")||800;setTimeout(()=>{s.style.opacity="1",s.style.transform="translateY(0)"},i)}T()}function T(){var o;const e=document.querySelector(".hero-video");if(!e)return;if((o=window.matchMedia)==null?void 0:o.call(window,"(prefers-reduced-motion: reduce)").matches){e.pause();return}e.playbackRate=.5,e.play().catch(()=>{});let s=!0;document.addEventListener("visibilitychange",()=>{s=!document.hidden});const i=()=>{if(e.readyState<2){e.addEventListener("loadeddata",i,{once:!0});return}const t=e.duration||5,c=Math.min(6,t),a=Math.max(0,(t-c)/2),l=Math.min(t,a+c),d=.02;let n=1;function u(){if(!s){requestAnimationFrame(u);return}if(n===1&&!e.paused&&e.currentTime<l-.05){requestAnimationFrame(u);return}n===1&&e.currentTime>=l-.03?(n=-1,e.pause()):n===-1&&e.currentTime<=a+.03&&(n=1,e.play().catch(()=>{})),n===-1&&(e.currentTime=Math.max(a,e.currentTime-d)),requestAnimationFrame(u)}requestAnimationFrame(u)};i()}function C(){document.querySelectorAll(".hero-layer, .cursor, .content-section").forEach(s=>{s.style.willChange="transform"}),document.addEventListener("visibilitychange",()=>{document.body.style.animationPlayState=document.hidden?"paused":"running"});const r=document.querySelector(".theme-toggle-float");r&&(r.addEventListener("focusout",()=>r.blur()),document.addEventListener("mousedown",s=>{r.contains(s.target)||r.blur()}))}
