(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=r(i);fetch(i.href,n)}})();document.addEventListener("DOMContentLoaded",()=>{L(),x(),k(),M(),I(),T(),q(),O()});function L(){const e=document.querySelector(".navbar"),t=document.querySelector(".navbar-progress");window.addEventListener("scroll",()=>{const s=window.pageYOffset,i=document.documentElement.scrollHeight-window.innerHeight,n=s/i*100;t&&(t.style.width=`${n}%`),e&&e.classList.toggle("scrolled",s>100)}),document.querySelectorAll(".nav-link").forEach(s=>{s.addEventListener("click",i=>{const n=s.getAttribute("href");if(n!=null&&n.startsWith("#")){i.preventDefault();const c=document.querySelector(n);c&&c.scrollIntoView({behavior:"smooth"}),v()}})}),w()}function w(){const e=document.getElementById("nav-toggle"),t=document.getElementById("nav-menu");if(!e||!t)return;const r=document.createElement("div");r.className="nav-overlay",r.id="nav-overlay",document.body.appendChild(r),e.addEventListener("click",()=>{e.getAttribute("aria-expanded")==="true"?v():A()}),r.addEventListener("click",v),document.addEventListener("keydown",s=>{s.key==="Escape"&&v()}),window.addEventListener("resize",()=>{window.innerWidth>768&&v()})}function A(){const e=document.getElementById("nav-toggle"),t=document.getElementById("nav-menu"),r=document.getElementById("nav-overlay");e&&(e.setAttribute("aria-expanded","true"),e.setAttribute("aria-label","Menü schließen")),t&&t.classList.add("active"),r&&r.classList.add("active"),document.body.style.overflow="hidden"}function v(){const e=document.getElementById("nav-toggle"),t=document.getElementById("nav-menu"),r=document.getElementById("nav-overlay");e&&(e.setAttribute("aria-expanded","false"),e.setAttribute("aria-label","Menü öffnen")),t&&t.classList.remove("active"),r&&r.classList.remove("active"),document.body.style.overflow=""}function x(){const e={threshold:[0,.1],rootMargin:"0px 0px -100px 0px"},t=new IntersectionObserver(s=>{s.forEach(i=>{const n=i.target,c=n.getAttribute("data-scroll");i.isIntersecting?(n.classList.add("visible"),n.classList.remove("scroll-init"),c&&n.classList.add(`scroll-${c}`),n.hasAttribute("data-scroll-once")&&t.unobserve(n)):n.hasAttribute("data-scroll-once")||(n.classList.remove("visible"),n.classList.add("scroll-init"),c&&n.classList.remove(`scroll-${c}`),c!=null&&c.includes("parallax")&&(n.style.transform=""))})},e);document.querySelectorAll("[data-scroll]").forEach(s=>{t.observe(s),s.classList.add("scroll-init")}),S()}function S(){var i;if((i=window.matchMedia)==null?void 0:i.call(window,"(prefers-reduced-motion: reduce)").matches)return;let t=!1;function r(n,c){return c/window.innerHeight*({"parallax-slow":-30,"parallax-medium":-50,"parallax-fast":-90}[n]||-40)}function s(){document.querySelectorAll('[data-scroll*="parallax"]').forEach(c=>{const a=c.getBoundingClientRect();if(a.bottom<-200||a.top>window.innerHeight+200)return;const l=a.top+a.height/2,u=window.innerHeight/2,o=l-u,d=c.getAttribute("data-scroll"),m=r(d,o);c.style.transform=`translate3d(0, ${m}px, 0)`}),t=!1}window.addEventListener("scroll",()=>{t||(requestAnimationFrame(s),t=!0)},{passive:!0}),window.addEventListener("resize",s,{passive:!0})}function k(){const e=document.querySelector('a[href="#impressum"]'),t=document.querySelector('a[href="#datenschutz"]'),r=document.getElementById("impressum-overlay"),s=document.getElementById("datenschutz-overlay");let i=null;function n(o){if(!o)return[];const d=["a[href]","button:not([disabled])","input:not([disabled])","textarea:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(", ");return Array.from(o.querySelectorAll(d)).filter(m=>m.offsetParent!==null)}function c(o,d){if(!o)return;i=d||null,o.classList.add("active"),o.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden";const m=n(o);m.length?m[0].focus():(o.setAttribute("tabindex","-1"),o.focus()),o.addEventListener("keydown",u),document.addEventListener("keydown",l)}function a(o){o&&(o.classList.remove("active"),o.setAttribute("aria-hidden","true"),document.body.style.overflow="",o.removeEventListener("keydown",u),document.removeEventListener("keydown",l),i!=null&&i.focus&&i.focus(),i=null)}function l(o){if(o.key==="Escape"){const d=document.querySelector(".legal-overlay.active");d&&a(d)}}function u(o){if(o.key!=="Tab")return;const d=o.currentTarget,m=n(d);if(!m.length){o.preventDefault();return}const f=m[0],g=m[m.length-1];o.shiftKey&&document.activeElement===f?(o.preventDefault(),g.focus()):!o.shiftKey&&document.activeElement===g&&(o.preventDefault(),f.focus())}e==null||e.addEventListener("click",o=>{o.preventDefault(),c(r,e)}),t==null||t.addEventListener("click",o=>{o.preventDefault(),c(s,t)}),document.querySelectorAll(".close-legal").forEach(o=>{o.addEventListener("click",()=>{const d=o.closest(".legal-overlay");d&&a(d)})}),[r,s].forEach(o=>{o&&(o.addEventListener("click",d=>{d.target===o&&a(o)}),o.setAttribute("aria-hidden","true"))})}function T(){var a;const e=document.getElementById("theme-toggle"),t=document.documentElement;let r=document.getElementById("theme-status-sr");r||(r=document.createElement("div"),r.id="theme-status-sr",r.setAttribute("aria-live","polite"),r.className="sr-only",document.body.appendChild(r));function s(l){const u=l==="dark";t.setAttribute("data-theme",l),e&&e.setAttribute("aria-checked",String(u));const o=document.getElementById("theme-desc");o&&(o.textContent="Hell / Dunkel"),r.textContent=u?"Dunkelmodus aktiviert":"Hellmodus aktiviert"}const i=localStorage.getItem("noart-theme"),n=(a=window.matchMedia)==null?void 0:a.call(window,"(prefers-color-scheme: dark)").matches;s(i||(n?"dark":"light")),e&&(e.addEventListener("click",()=>{const u=t.getAttribute("data-theme")==="dark"?"light":"dark";s(u),localStorage.setItem("noart-theme",u)}),e.addEventListener("keydown",l=>{(l.key===" "||l.key==="Enter")&&(l.preventDefault(),e.click())}))}function q(){const e=document.querySelector(".theme-toggle-float");if(!e||!("ontouchstart"in window||navigator.maxTouchPoints>0))return;let r=null;const s=()=>{clearTimeout(r),r=setTimeout(()=>e.classList.remove("expanded"),1e3)},i=()=>{e.classList.add("expanded"),s()};e.addEventListener("touchstart",n=>{i()},{passive:!0}),e.addEventListener("click",()=>{i()}),e.addEventListener("blur",()=>{e.classList.remove("expanded"),clearTimeout(r)},!0),document.addEventListener("touchstart",n=>{e.contains(n.target)||(e.classList.remove("expanded"),clearTimeout(r))},{passive:!0})}function M(){const e=document.getElementById("contact-form");if(!e)return;let t=document.getElementById("contact-status");t||(t=document.createElement("div"),t.id="contact-status",t.setAttribute("tabindex","-1"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.className="contact-status",e.prepend(t)),e.addEventListener("submit",async s=>{var o,d,m,f,g,y;s.preventDefault();const i=new FormData(e),n={name:((o=i.get("name"))==null?void 0:o.trim())||"",email:((d=i.get("email"))==null?void 0:d.trim())||"",subject:((m=i.get("subject"))==null?void 0:m.trim())||"",message:((f=i.get("message"))==null?void 0:f.trim())||""};if(!n.name||!n.email||!n.message){r("Bitte füllen Sie alle Felder aus.",!0),(g=e.querySelector('[name="name"]'))==null||g.focus();return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)){r("Bitte geben Sie eine gültige E-Mail-Adresse ein.",!0),(y=e.querySelector('[name="email"]'))==null||y.focus();return}const a=e.querySelector('button[type="submit"]'),l=(a==null?void 0:a.querySelector("span"))||(a==null?void 0:a.firstChild),u=l==null?void 0:l.textContent;a&&(l&&(l.textContent="Wird gesendet..."),a.setAttribute("aria-busy","true"),a.disabled=!0),t.textContent="",t.classList.remove("status-error");try{const h=new AbortController,b=setTimeout(()=>h.abort(),5e3),E=await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),signal:h.signal});clearTimeout(b);const p=await E.json();p.ok?(r("Vielen Dank für Ihre Nachricht! Wir werden uns bald bei Ihnen melden.",!1),e.reset()):r(p.error||"Beim Senden ist ein Fehler aufgetreten.",!0)}catch(h){console.warn("Contact form submission failed:",h),r("Netzwerkfehler: Nachricht konnte nicht gesendet werden.",!0)}finally{a&&(l&&u&&(l.textContent=u),a.removeAttribute("aria-busy"),a.disabled=!1)}});function r(s,i){t.textContent=s,t.classList.toggle("status-error",i),t.focus()}}function I(){const e=document.querySelectorAll(".hero-line"),t=document.querySelector(".hero-subtitle"),r=document.querySelector(".hero-cta");if(e.forEach((s,i)=>{const n=s.getAttribute("data-delay")||i*200;setTimeout(()=>{s.style.opacity="1",s.style.transform="translateY(0)"},n)}),t){const s=t.getAttribute("data-delay")||600;setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(0)"},s)}if(r){const s=r.getAttribute("data-delay")||800;setTimeout(()=>{r.style.opacity="1",r.style.transform="translateY(0)"},s)}C()}function C(){var i;const e=document.querySelector(".hero-video");if(!e)return;if((i=window.matchMedia)==null?void 0:i.call(window,"(prefers-reduced-motion: reduce)").matches){e.pause();return}e.playbackRate=.5,e.play().catch(()=>{});let r=!0;document.addEventListener("visibilitychange",()=>{r=!document.hidden});const s=()=>{if(e.readyState<2){e.addEventListener("loadeddata",s,{once:!0});return}const n=e.duration||5,c=Math.min(6,n),a=Math.max(0,(n-c)/2),l=Math.min(n,a+c),u=.02;let o=1;function d(){if(!r){requestAnimationFrame(d);return}if(o===1&&!e.paused&&e.currentTime<l-.05){requestAnimationFrame(d);return}o===1&&e.currentTime>=l-.03?(o=-1,e.pause()):o===-1&&e.currentTime<=a+.03&&(o=1,e.play().catch(()=>{})),o===-1&&(e.currentTime=Math.max(a,e.currentTime-u)),requestAnimationFrame(d)}requestAnimationFrame(d)};s()}function O(){document.querySelectorAll(".hero-layer, .cursor, .content-section").forEach(r=>{r.style.willChange="transform"}),document.addEventListener("visibilitychange",()=>{document.body.style.animationPlayState=document.hidden?"paused":"running"});const t=document.querySelector(".theme-toggle-float");t&&(t.addEventListener("focusout",()=>t.blur()),document.addEventListener("mousedown",r=>{t.contains(r.target)||t.blur()}))}
