(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(t){if(t.ep)return;t.ep=!0;const n=a(t);fetch(t.href,n)}})();document.addEventListener("DOMContentLoaded",function(){v(),w(),E(),g(),S(),L(),k()});typeof window<"u"&&(window.__NOART=window.__NOART||{},window.__NOART.initializeContactForm=g,window.__NOART&&window.__NOART.sentryDsn&&function(){try{const e=document.createElement("script");e.src="https://browser.sentry-cdn.com/7.0.0/bundle.min.js",e.crossorigin="anonymous",e.onload=function(){try{Sentry.init({dsn:window.__NOART.sentryDsn})}catch(a){console.warn("Sentry browser init failed",a)}},document.head.appendChild(e)}catch(e){console.warn("Sentry load error",e)}}());function b(){if(!("serviceWorker"in navigator))return;navigator.serviceWorker.getRegistration().then(e=>{if(e){if(e.waiting){o(e);return}e.addEventListener("updatefound",()=>{const a=e.installing;a&&a.addEventListener("statechange",()=>{a.state==="installed"&&navigator.serviceWorker.controller&&o(e)})})}});function o(e){const a=document.createElement("div");a.className="update-toast",a.innerHTML='<span>Neues Update verfügbar</span><button class="update-button">Neu laden</button>',document.body.appendChild(a),a.querySelector(".update-button").addEventListener("click",()=>{e.waiting&&(e.waiting.postMessage({type:"SKIP_WAITING"}),navigator.serviceWorker.addEventListener("controllerchange",function(){window.location.reload()}))})}}document.addEventListener("DOMContentLoaded",()=>b());function v(){const o=document.querySelector(".navbar"),e=document.querySelector(".navbar-progress");window.addEventListener("scroll",()=>{const r=window.pageYOffset,t=document.documentElement.scrollHeight-window.innerHeight,n=r/t*100;e&&(e.style.width=n+"%"),o&&(r>100?o.classList.add("scrolled"):o.classList.remove("scrolled"))}),document.querySelectorAll(".nav-link").forEach(r=>{r.addEventListener("click",t=>{const n=r.getAttribute("href");if(n&&n.startsWith("#")){t.preventDefault();const i=document.querySelector(n);i&&i.scrollIntoView({behavior:"smooth"})}})})}function w(){const o={threshold:[0,.1],rootMargin:"0px 0px -100px 0px"},e=new IntersectionObserver(m=>{m.forEach(l=>{const c=l.target;if(l.isIntersecting){c.classList.add("visible"),c.classList.remove("scroll-init");const h=c.getAttribute("data-scroll");h&&c.classList.add(`scroll-${h}`),c.hasAttribute("data-scroll-once")&&e.unobserve(c);return}if(!c.hasAttribute("data-scroll-once")){c.classList.remove("visible"),c.classList.add("scroll-init");const h=c.getAttribute("data-scroll");h&&c.classList.remove(`scroll-${h}`),h&&h.indexOf("parallax")!==-1&&(c.style.transform="")}})},o);document.querySelectorAll("[data-scroll]").forEach(m=>{e.observe(m),m.classList.add("scroll-init")});let r=!1;const t=window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;function n(m,l){const c=l/window.innerHeight;switch(m){case"parallax-slow":return c*-30;case"parallax-medium":return c*-50;case"parallax-fast":return c*-90;default:return c*-40}}function i(){if(t)return;document.querySelectorAll('[data-scroll*="parallax"]').forEach(l=>{const c=l.getBoundingClientRect(),h=c.top+c.height/2,s=window.innerHeight/2,u=h-s,d=l.getAttribute("data-scroll");if(c.bottom<-200||c.top>window.innerHeight+200)return;const p=n(d,u);l.style.transform=`translate3d(0, ${p}px, 0)`}),r=!1}window.addEventListener("scroll",()=>{t||r||(requestAnimationFrame(i),r=!0)},{passive:!0}),window.addEventListener("resize",()=>{t||i()},{passive:!0})}function E(){const o=document.querySelector('a[href="#impressum"]'),e=document.querySelector('a[href="#datenschutz"]'),a=document.getElementById("impressum-overlay"),r=document.getElementById("datenschutz-overlay");function t(s){return s?Array.from(s.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, [tabindex]:not([tabindex="-1"])')).filter(u=>u.offsetParent!==null):[]}let n=null;function i(s,u){if(!s)return;n=u||null,s.classList.add("active"),s.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden";const d=t(s);d.length?d[0].focus():(s.setAttribute("tabindex","-1"),s.focus()),s.addEventListener("keydown",c),document.addEventListener("keydown",l)}function m(s){if(s){s.classList.remove("active"),s.setAttribute("aria-hidden","true"),document.body.style.overflow="",s.removeEventListener("keydown",c),document.removeEventListener("keydown",l);try{n&&typeof n.focus=="function"&&n.focus()}catch{}n=null}}function l(s){if(s.key==="Escape"||s.key==="Esc"){const u=document.querySelector(".legal-overlay.active");u&&m(u)}}function c(s){if(s.key!=="Tab")return;const u=s.currentTarget,d=t(u);if(!d.length){s.preventDefault();return}const p=d[0],f=d[d.length-1];s.shiftKey?document.activeElement===p&&(s.preventDefault(),f.focus()):document.activeElement===f&&(s.preventDefault(),p.focus())}o&&a&&o.addEventListener("click",s=>{s.preventDefault(),i(a,o)}),e&&r&&e.addEventListener("click",s=>{s.preventDefault(),i(r,e)}),document.querySelectorAll(".close-legal").forEach(s=>{s.addEventListener("click",()=>{const u=s.closest(".legal-overlay");u&&m(u)})}),[a,r].forEach(s=>{s&&(s.addEventListener("click",u=>{u.target===s&&m(s)}),s.setAttribute("aria-hidden",s.classList.contains("active")?"false":"true"))})}function L(){const o=document.getElementById("theme-toggle"),e=document.documentElement;function a(){let i=document.getElementById("theme-status-sr");return i||(i=document.createElement("div"),i.id="theme-status-sr",i.setAttribute("aria-live","polite"),i.style.position="absolute",i.style.left="-9999px",i.style.width="1px",i.style.height="1px",i.style.overflow="hidden",document.body.appendChild(i)),i}const r=localStorage.getItem("noart-theme"),t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;function n(i){i==="dark"?(e.setAttribute("data-theme","dark"),o&&o.setAttribute("aria-checked","true")):(e.setAttribute("data-theme","light"),o&&o.setAttribute("aria-checked","false"));const m=document.getElementById("theme-desc");m&&(m.textContent="Hell / Dunkel");const l=a();l.textContent=i==="dark"?"Dunkelmodus aktiviert":"Hellmodus aktiviert"}n(r==="dark"||!r&&t?"dark":"light"),o&&(o.addEventListener("click",()=>{const m=e.getAttribute("data-theme")==="dark"?"light":"dark";n(m),localStorage.setItem("noart-theme",m),setTimeout(()=>{const l=o.closest(".theme-toggle-float");l&&l.blur()},100)}),o.addEventListener("keydown",i=>{(i.key===" "||i.key==="Spacebar"||i.key==="Enter")&&(i.preventDefault(),o.click())}))}function A(){const o=document.querySelector(".theme-toggle-float");if(!o||!("ontouchstart"in window||navigator.maxTouchPoints>0))return;let a=null;o.addEventListener("click",r=>{r.target&&r.target.id==="theme-toggle"||(o.classList.add("expanded"),window.clearTimeout(a),a=window.setTimeout(()=>o.classList.remove("expanded"),2e3))}),o.addEventListener("blur",()=>{o.classList.remove("expanded"),window.clearTimeout(a)},!0)}document.addEventListener("DOMContentLoaded",()=>{A()});function g(){const o=document.getElementById("contact-form");if(!o)return;let e=document.getElementById("contact-status");e||(e=document.createElement("div"),e.id="contact-status",e.setAttribute("tabindex","-1"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.className="contact-status",o.prepend(e)),e.setAttribute("aria-atomic","true"),o.addEventListener("submit",a=>{a.preventDefault();const r=new FormData(o),t=Object.fromEntries(r);if(t.name=(t.name||"").trim(),t.email=(t.email||"").trim(),t.message=(t.message||"").trim(),!t.name||!t.email||!t.message){e.textContent="Bitte füllen Sie alle Felder aus.",e.classList.add("status-error");const d=o.querySelector('[name="name"]');d&&typeof d.focus=="function"&&d.focus();return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)){e.textContent="Bitte geben Sie eine gültige E-Mail-Adresse ein.",e.classList.add("status-error");const d=o.querySelector('[name="email"]');d&&typeof d.focus=="function"&&d.focus();return}const i=o.querySelector('button[type="submit"]');let m=null;if(i){const d=i.querySelector("span")||i.firstChild;d&&(m=d.textContent),d&&(d.textContent="Wird gesendet..."),i.setAttribute("aria-busy","true"),i.disabled=!0}e.textContent="",e.classList.remove("status-error");const l=window.AbortController?new AbortController:null,c=l?l.signal:null;let h=!1;const s={name:t.name,email:t.email,subject:t.subject,message:t.message};function u(d,p){if(!h){if(h=!0,e.textContent=p,e.classList.remove("status-error"),d||e.classList.add("status-error"),d&&o.reset(),i){const f=i.querySelector("span")||i.firstChild;f&&m!==null&&(f.textContent=m),i.removeAttribute("aria-busy"),i.disabled=!1}typeof e.focus=="function"&&e.focus()}}if(window.fetch){const d=setTimeout(()=>{l&&l.abort()},5e3);fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),signal:c}).then(p=>p.json()).then(p=>(clearTimeout(d),p.ok?p.json().then(f=>{if(f&&f.ok)u(!0,"Vielen Dank für Ihre Nachricht! Wir werden uns bald bei Ihnen melden.");else{const y=f&&f.error||"Beim Senden ist ein Fehler aufgetreten. Bitte versuchen Sie es später erneut.";u(!1,y)}}):p.json().then(f=>{const y=f&&f.error||"Serverfehler beim Senden der Nachricht.";u(!1,y)}))).catch(p=>{clearTimeout(d),console.warn("Contact fetch failed",p),u(!1,"Netzwerkfehler: Nachricht konnte nicht gesendet werden. Bitte prüfen Sie Ihre Verbindung und versuchen Sie es erneut.")})}else setTimeout(()=>{u(!0,"Vielen Dank für Ihre Nachricht! Wir werden uns bald bei Ihnen melden.")},2e3)})}function S(){const o=document.querySelectorAll(".hero-line"),e=document.querySelector(".hero-subtitle"),a=document.querySelector(".hero-cta");if(o.forEach((r,t)=>{const n=r.getAttribute("data-delay")||t*200;setTimeout(()=>{r.style.opacity="1",r.style.transform="translateY(0)"},n)}),e){const r=e.getAttribute("data-delay")||600;setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)"},r)}if(a){const r=a.getAttribute("data-delay")||800;setTimeout(()=>{a.style.opacity="1",a.style.transform="translateY(0)"},r)}try{const r=document.querySelector(".hero-video");if(r)if(window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches)r.pause();else{r.playbackRate=.5;const n=r.play();n&&n.catch&&n.catch(()=>{})}}catch(r){console.warn("Hero video control failed",r)}(function(){const t=document.querySelector(".hero-video");if(!t)return;const n=window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)");if(n&&n.matches)return;let i=!0;document.addEventListener("visibilitychange",()=>{i=!document.hidden});function m(l){if(t.readyState>=2)return l();const c=()=>{t.removeEventListener("loadeddata",c),l()};t.addEventListener("loadeddata",c)}m(()=>{const l=t.duration||5,c=Math.min(6,l),h=Math.max(0,(l-c)/2),s=Math.min(l,h+c);let u=1;const d=.02;t.playbackRate=.5;const p=()=>{const y=t.play();y&&y.catch&&y.catch(()=>{})};p();function f(){if(!i){requestAnimationFrame(f);return}if(!t.paused&&!t.seeking&&t.playbackRate>0&&u===1&&t.currentTime<s-.05){requestAnimationFrame(f);return}if(u===1&&t.currentTime>=s-.03?(u=-1,t.pause()):u===-1&&t.currentTime<=h+.03&&(u=1,p()),u===-1){const y=d;t.currentTime=Math.max(h,t.currentTime-y)}requestAnimationFrame(f)}requestAnimationFrame(f)})})()}function k(){document.querySelectorAll(".hero-layer, .cursor, .content-section").forEach(a=>{a.style.willChange="transform"}),document.addEventListener("visibilitychange",()=>{document.hidden?document.body.style.animationPlayState="paused":document.body.style.animationPlayState="running"}),console.log("Performance optimizations enabled");const e=document.querySelector(".theme-toggle-float");e&&e.addEventListener("focusout",()=>{e.blur()}),document.addEventListener("mousedown",a=>{const r=document.querySelector(".theme-toggle-float");r&&(r.contains(a.target)||r.blur())})}(function(){const o=window.__NOART&&window.__NOART.recaptchaSiteKey||"";if(!o)return;function e(a){if(window.grecaptcha)return a();const r=document.createElement("script");r.src="https://www.google.com/recaptcha/api.js?render="+o,r.defer=!0,r.onload=a,document.head.appendChild(r)}document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("contact-form");a&&a.addEventListener("submit",function(r){!o||!window.grecaptcha||(r.preventDefault(),e(()=>{grecaptcha.ready(()=>{grecaptcha.execute(o,{action:"submit"}).then(function(t){let n=a.querySelector('input[name="recaptchaToken"]');n||(n=document.createElement("input"),n.type="hidden",n.name="recaptchaToken",a.appendChild(n)),n.value=t,a.submit()})})}))})})})();(function(){const o="noart_analytics_consent";function e(){try{return localStorage.getItem(o)==="1"}catch{return!1}}function a(n){try{localStorage.setItem(o,n?"1":"0")}catch{}}function r(){if(window.plausible)return;const n=document.createElement("script");n.setAttribute("defer",""),n.setAttribute("data-domain",window.__NOART&&window.__NOART.plausibleDomain?window.__NOART.plausibleDomain:"www.noart.de"),n.src="https://plausible.io/js/plausible.js",document.head.appendChild(n)}function t(){const n=document.createElement("div");n.className="consent-banner",n.innerHTML=`
      <p>
        Wir nutzen anonyme Analyse zur Verbesserung der Website. Stimmen Sie zu?
      </p>
      <div class="consent-actions">
        <button class="consent-button ghost" data-action="decline">Ablehnen</button>
        <button class="consent-button primary" data-action="accept">Zustimmen</button>
      </div>
    `,n.addEventListener("click",i=>{const m=i.target.closest("[data-action]");if(!m)return;const l=m.getAttribute("data-action");l==="accept"?(a(!0),r(),n.remove()):l==="decline"&&(a(!1),n.remove())}),document.body.appendChild(n)}document.addEventListener("DOMContentLoaded",()=>{if(e()){r();return}t()})})();
